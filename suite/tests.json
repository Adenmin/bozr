[
  {
    "description": "Snapshot Prepare",
    "calls": [
      {
        "on": {
          "method": "GET",
          "url": "/ta/rest/v1/test/prepare",
          "headers" : {
            "accept" : "application/json"
          },
          "params": {
            "companies": "rest.all"
          }
        },
        "expect": {
          "statusCode": 200
        }
      }
    ]
  },
  {
    "description": "GetFilterIDNonexistent",
    "calls": [
      {
        "on": {
          "method": "GET",
          "url": "/ta/rest/v1/login",
          "headers" : {
            "accept" : "application/json"
          },
          "params": {
            "company": "rest.all",
            "username": "managerViewRateTables",
            "password": "Password1!"
          }
        },
        "expect": {
          "statusCode": 200,
          "contentType": "application/json",
          "body": {},
          "bodySchema" : "login-schema.json"
        },
        "remember": {
          "savedToken": "token"
        }
      },
      {
        "on": {
          "method": "GET",
          "url": "/ta/rest/v1/company/rate-tables",
          "headers": {
            "Authentication": "bearer {savedToken}",
            "Accept": "application/json",
            "Content-Type": "application/json"
          },
          "params": {
            "filter": "id:in:111"
          }
        },
        "expect": {
          "statusCode": 200,
          "contentType": "application/json",
          "body": {
            "rate_tables.size()": "0"
          }
        }
      }
    ]
  },
  {
    "description": "GetSpecificFilterIDSpecify",
    "calls": [
      {
        "on": {
          "method": "GET",
          "url": "/ta/rest/v1/login",
          "headers" : {
            "accept" : "application/json"
          },
          "params": {
            "company": "rest.all",
            "username": "managerViewRateTables",
            "password": "Password1!"
          }
        },
        "expect": {
          "statusCode": 200,
          "contentType": "application/json",
          "body": {},
		  "bodySchema" : "login-schema.json"
        },
        "remember": {
          "savedToken": "token"
        }
      },
      {
        "on": {
          "method": "GET",
          "url": "/ta/rest/v1/company/rate-tables",
          "headers": {
            "Authentication": "bearer {savedToken}",
            "Accept": "application/json",
            "Content-Type": "application/json"
          },
          "params": {
            "filter": "id:in:417601"
          }
        },
        "expect": {
          "statusCode": 200,
          "contentType": "application/json",
          "body": {
            "~rate_tables.id": "417601",
            "~rate_tables.description": "Test Rate Table1"
          }
        }
      }
    ]
  },
  {
    "description": "DeleteFilterFieldRateTableIDSpecify",
    "calls": [
      {
        "on": {
          "method": "GET",
          "url": "/ta/rest/v1/login",
          "headers" : {
            "accept" : "application/json"
          },
          "params": {
            "company": "rest.all",
            "username": "managerDeleteRateTables",
            "password": "Password1!"
          }
        },
        "expect": {
          "statusCode": 200,
          "contentType": "application/json",
          "bodySchema" : "login-schema.json"
        },
        "remember": {
          "savedToken": "token"
        }
      },
      {
        "on": {
          "method": "POST",
          "url": "/ta/rest/v1/company/rate-tables",
          "headers": {
            "Authentication": "bearer {savedToken}",
            "Accept": "application/json",
            "Content-Type": "application/json"
          },
          "bodyFile" : "rate_table.json"
        },
        "expect": {
          "statusCode": 200,
          "contentType": "application/json",
          "body": {
            "items.size()": "1"
          }
        },
        "remember": {
          "newRateTableId": "items.0.id"
        }
      },
      {
        "on": {
          "method": "DELETE",
          "url": "/ta/rest/v1/company/rate-tables",
          "headers": {
            "Authentication": "bearer {savedToken}",
            "Accept": "application/json",
            "Content-Type": "application/json"
          },
          "params": {
            "filter": "id:in:{newRateTableId}"
          }
        },
        "expect": {
          "statusCode": 200,
          "contentType": "application/json",
          "body": {
            "items.size()": "1",
            "~items.status": "OK"
          }
        }
      }
    ]
  },
  {
    "description": "Snapshot Reset",
    "calls": [
      {
        "on": {
          "method": "GET",
          "url": "/ta/rest/v1/test/cleanup",
          "headers" : {
            "accept" : "application/json"
          },
          "params": {
            "companies": "rest.all"
          }
        },
        "expect": {
          "statusCode": 200
        }
      }
    ]
  }
]